<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description" content="Xenon Boostrap Admin Panel" />
	<meta name="author" content="" />
	
	<title>DreamTeam Drive Login</title>

	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Arimo:400,700,400italic">
	<link rel="stylesheet" href="assets/css/fonts/linecons/css/linecons.css">
	<link rel="stylesheet" href="assets/css/fonts/fontawesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="assets/css/bootstrap.css">
	<link rel="stylesheet" href="assets/css/xenon-core.css">
	<link rel="stylesheet" href="assets/css/xenon-forms.css">
	<link rel="stylesheet" href="assets/css/xenon-components.css">
	<link rel="stylesheet" href="assets/css/xenon-skins.css">
	<link rel="stylesheet" href="assets/css/custom.css">

	<script src="assets/js/jquery-1.11.1.min.js"></script>

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
	
	
</head>
<body class="page-body login-page login-light">

	
	<div class="login-container">
	
		<div class="row">
		
			<div class="col-sm-6 col-md-offset-3">
			
				
				<!-- Errors container -->
				<div class="errors-container">
				
									
				</div>
				
				<!-- Add class "fade-in-effect" for login form effect -->
				<form method="post" role="form" id="login" class="login-form fade-in-effect">
					
					<div class="login-header">
						<a href="index.html" class="logo">
							<!--<img src="assets/images/logo-white-bg@2x.png" alt="" width="80" />-->
							<h1>DT Drive <span>log in</span></h1>
						</a>
						
						<p>Dear user, log in to access to your Drive!</p>
					</div>
	
					
					<div class="form-group">
						<button id="authorize-button" style="visibility: hidden">Authorize</button>
					</div>
					
					<div class="login-footer">
						
						<div class="info-links">
							<a href="#">ToS</a> -
							<a href="#">Privacy Policy</a>
						</div>
						
					</div>
					
				</form>
				
			
				
			</div>
			
		</div>
		
	</div>

	<!-- Bottom Scripts -->
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/js/TweenMax.min.js"></script>
	<script src="assets/js/resizeable.js"></script>
	<script src="assets/js/joinable.js"></script>
	<script src="assets/js/xenon-api.js"></script>
	<script src="assets/js/xenon-toggles.js"></script>
	<script src="assets/js/jquery-validate/jquery.validate.min.js"></script>
	<script src="assets/js/toastr/toastr.min.js"></script>

	
	
	<!-- JavaScripts initializations and stuff -->
	<script src="assets/js/xenon-custom.js"></script>
	<script type="text/javascript">
		var clientId = '931551019502-nu8qirrk52a8olf2jmtu0hlic8c5jj7q.apps.googleusercontent.com';

      var apiKey = 'AIzaSyAObyK6Pe366jOWNmBPTQDD7Vrdzmv57QM';

      var scopes = 'https://www.googleapis.com/auth/drive';

      function handleClientLoad() {
        // Step 2: Reference the API key
        gapi.client.setApiKey(apiKey);
        window.setTimeout(checkAuth,1);
      }

      function checkAuth() {
        gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
      }

      function handleAuthResult(authResult) {
        var authorizeButton = document.getElementById('authorize-button');
        if (authResult && !authResult.error) {
          authorizeButton.style.visibility = 'hidden';
          makeApiCall();
        } else {
          authorizeButton.style.visibility = '';
          authorizeButton.onclick = handleAuthClick;
        }
      }

      function retrieveAllFiles(callback) {
		  var retrievePageOfFiles = function(request, result) {
		    request.execute(function(resp) {
		      result = result.concat(resp.items);
		      var nextPageToken = resp.nextPageToken;
		      if (nextPageToken) {
		        request = gapi.client.drive.files.list({
		          'pageToken': nextPageToken
		        });
		        retrievePageOfFiles(request, result);
		      } else {
		        callback(result);
		      }
		    });
		  }
		  var initialRequest = gapi.client.drive.files.list();
		  retrievePageOfFiles(initialRequest, []);
		}

      function handleAuthClick(event) {
        // Step 3: get authorization to use private data
        gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
        return false;
      }

      // Load the API and make an API call.  Display the results on the screen.
      function makeApiCall() {
      	 var accessToken = gapi.auth.getToken().access_token;
      	 console.log(accessToken);
      	  gapi.client.load('drive', 'v2', function() {
      	  	retrieveAllFiles(function(e){
      	 	console.log("List of files");
      	 	console.log(e);
      	 })
});
      	 
	    var xhr = new XMLHttpRequest();
	    xhr.open('GET', "https://doc-0g-2g-docs.googleusercontent.com/docs/securesc/9gdumo5k2rtjr9dmf3bdee3fd8u9sqbn/4ff3s1cqs265jtt6sh3mtmttp6fljror/1425391200000/11007915916814485104/11007915916814485104/0B3mO0lfwqEHyZjBGR21zMGlhZXM?e=download&gd=true&access_token=ya29.KwGgVX4rWckIdJR_YZJnjekQjvw2_1ufcN4_L9UgkQVVFhS7IKe_1t5P9w080ifCrIui97GGL6nBjw",true);
	    // ya29.KwGgVX4rWckIdJR_YZJnjekQjvw2_1ufcN4_L9UgkQVVFhS7IKe_1t5P9w080ifCrIui97GGL6nBjw
	    //xhr.setRequestHeader('Authorization', 'Bearer ' + accessToken);
	    //xhr.dataType =
	    xhr.onload = function() {

	      //console.log(xhr.responseText);
	    };
	    xhr.onerror = function() {
	      //callback(null);
	    };
	    xhr.send();
      }
	</script>
	<script type="text/javascript" src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
	<script type="text/javascript">
	$( document ).ready(function(){
		   	setTimeout(function(){ $(".fade-in-effect").addClass('in'); }, 1);
		   	//handleClientLoad();
	});
	/*$
						
						
						// Set Form focus
						$("form#login .form-group:has(.form-control):first .form-control").focus();

		  	$(".google").on("click",function(e){
		  		e.preventDefault();
					//$('#myModal').modal('show');
					$.get("authurl",function(res){
						console.log(res);
						window.location=res.url;
					});
				return false;
			});
	
*/
	</script>

</body>
</html>